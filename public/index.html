<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="MEEC Information Management Portal - Natural language query portal for organizational data">
    <title>Prototype - MEEC Information Management Portal</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="web-wrapper">
        <!-- Official Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <h1>Prototype - MEEC Information Management Portal</h1>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Tab Navigation -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="tab-query">Information Search</button>
                <button class="tab-btn" data-tab="tab-dashboard">Analytics Dashboard</button>
                <button class="tab-btn" data-tab="tab-sources">Official Data Sources</button>
            </nav>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Tab: Query -->
                <div id="tab-query" class="tab-content active">
                    <!-- Search View Container -->
                    <div id="searchView">
                        <!-- Query Input Section -->
                        <section class="query-section">
                            <div class="query-input-wrapper">
                                <textarea id="queryInput" class="query-input" aria-label="Search Public Service Data"
                                    placeholder="Ask MEEC Information Management Portal..." rows="1"></textarea>
                                <div class="query-footer">
                                    <div class="footer-right">
                                        <button id="micBtn" class="footer-btn mic-btn" title="Voice Search">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"
                                                    fill="currentColor" />
                                                <path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                <line x1="12" y1="19" x2="12" y2="23" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                <line x1="8" y1="23" x2="16" y2="23" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                        <button id="submitBtn" class="footer-btn submit-btn" title="Search">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2"
                                                    stroke-linecap="round" stroke-linejoin="round" />
                                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Results View Container (Hidden by default) -->
                    <div id="resultsView" class="hidden">

                        <div class="results-container">
                            <!-- Analytical Summary & Insight -->
                            <div id="analyticalSummary" class="analytical-summary"></div>

                            <!-- Tabled Results -->
                            <section id="resultsSection" class="results-table-section hidden">
                                <div class="results-controls">
                                    <div class="controls-left">
                                        <button id="backToSearchBtn" class="back-btn" title="Back to Search">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                stroke-width="2">
                                                <line x1="19" y1="12" x2="5" y2="12"></line>
                                                <polyline points="12 19 5 12 12 5"></polyline>
                                            </svg>
                                        </button>
                                        <span id="resultsCount" class="results-count"></span>
                                    </div>
                                    <button id="exportBtn" class="btn btn-secondary btn-sm">Export CSV</button>
                                </div>
                                <div class="table-container">
                                    <table id="resultsTable" class="results-table">
                                        <thead id="tableHead"></thead>
                                        <tbody id="tableBody"></tbody>
                                    </table>
                                </div>
                            </section>
                            <!-- Data Sources -->
                            <div id="sourcesContainer" class="sources-container hidden">
                                <div class="sources-label">Sources</div>
                                <div id="sourcesList" class="sources-list"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Dashboard -->
                <div id="tab-dashboard" class="tab-content">
                    <div class="iframe-container">
                        <iframe title="PBI DAX Testing" width="1140" height="541.25"
                            src="https://app.powerbi.com/reportEmbed?reportId=3b0a6b4e-ce50-4a5a-84f0-b57a37ce5d5c&autoAuth=true&embeddedDemo=true"
                            frameborder="0" allowFullScreen="true"></iframe>
                    </div>
                </div>

                <!-- Tab: Official Data Sources -->
                <div id="tab-sources" class="tab-content">
                    <div class="sources-assurance-header">
                        <h2>Verified Organizational Data</h2>
                        <p>This application queries official government MEEC data directly from secure SQL Server
                            databases. All information provided is derived from verified organizational records,
                            ensuring 0% AI hallucination in data retrieval.</p>
                        <div class="trust-banner">
                            <span class="trust-badge">Official Government Source</span>
                            <span class="trust-badge">SQL Verified</span>
                            <span class="trust-badge">Real-time Data Access</span>
                        </div>
                    </div>
                    <div id="sourcesGrid" class="sources-grid">
                        <!-- Populated by app.js -->
                        <div class="loading-sources">
                            <div class="spinner"></div>
                            <p>Loading official source inventory...</p>
                        </div>
                    </div>
                </div>

                <!-- Global Loading State -->
                <div id="loadingState" class="loading-state hidden">
                    <div class="spinner"></div>
                    <p>Analyzing and retrieving data...</p>
                </div>

                <!-- Global Error State -->
                <div id="errorState" class="error-state hidden">
                    <h3 id="errorTitle">Oops! Something went wrong</h3>
                    <p id="errorMessage"></p>
                    <button onclick="location.reload()" class="btn btn-primary">Refresh Page</button>
                </div>
            </main>
        </div>

    </div>

    <script src="/js/app.js"></script>
</body>

</html>